Version 4
SHEET 1 1464 960
WIRE 336 80 288 80
WIRE 448 80 416 80
WIRE 512 80 448 80
WIRE 688 80 592 80
WIRE 704 80 688 80
WIRE 784 80 768 80
WIRE 688 144 688 80
WIRE 288 192 288 80
WIRE 336 192 288 192
WIRE 448 192 448 80
WIRE 448 192 400 192
WIRE 496 192 448 192
WIRE 608 192 576 192
WIRE 736 192 704 192
WIRE 784 192 784 80
WIRE 784 192 736 192
WIRE 448 272 448 192
WIRE 288 320 288 192
WIRE 432 320 288 320
WIRE 592 320 528 320
WIRE 656 320 592 320
WIRE 816 320 656 320
WIRE 944 320 880 320
WIRE 288 352 288 320
WIRE 656 384 656 320
WIRE 736 384 736 192
WIRE 288 448 288 432
WIRE 736 448 736 384
WIRE 736 448 288 448
WIRE 944 448 944 320
WIRE 1056 448 944 448
WIRE 1232 448 1136 448
WIRE 288 464 288 448
WIRE 736 512 736 448
WIRE 1232 512 1232 448
WIRE 1232 512 736 512
WIRE 288 576 288 544
WIRE 432 576 288 576
WIRE 656 576 656 512
WIRE 656 576 528 576
WIRE 816 576 656 576
WIRE 944 576 944 448
WIRE 944 576 880 576
WIRE 1232 576 1232 512
WIRE 288 688 288 576
WIRE 336 688 288 688
WIRE 448 688 448 624
WIRE 448 688 400 688
WIRE 496 688 448 688
WIRE 608 688 576 688
WIRE 736 688 736 512
WIRE 736 688 704 688
WIRE 800 688 736 688
WIRE 288 800 288 688
WIRE 336 800 288 800
WIRE 448 800 448 688
WIRE 448 800 416 800
WIRE 688 816 688 736
WIRE 752 816 688 816
WIRE 800 816 800 768
WIRE 800 816 752 816
FLAG 1232 576 0
FLAG 448 192 GATE-MAIN
FLAG 944 448 OUT
FLAG 448 688 GATE-AUX
FLAG 288 320 MAIN
FLAG 288 576 AUX
FLAG 752 816 LOGIC-AUX
FLAG 656 576 AUX-OUT
FLAG 592 320 MAIN-OUT
SYMBOL pmos 528 272 R90
SYMATTR InstName M1
SYMATTR Value FDS4685
SYMBOL voltage 288 336 M0
SYMATTR InstName BATT-MAIN
SYMATTR Value PULSE(20 34 0 10ms 10ms 0 0 10)
SYMBOL res 480 208 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL zener 400 176 R90
WINDOW 0 -4 32 VBottom 2
WINDOW 3 36 32 VTop 2
SYMATTR InstName D1
SYMATTR Value BZX84C15L
SYMBOL res 432 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 20k
SYMBOL pmos 528 624 M270
SYMATTR InstName M2
SYMATTR Value FDS4685
SYMBOL zener 400 672 R90
WINDOW 0 -4 32 VBottom 2
WINDOW 3 36 32 VTop 2
SYMATTR InstName D2
SYMATTR Value BZX84C15L
SYMBOL res 432 784 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 20k
SYMBOL res 480 704 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL voltage 288 560 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
SYMATTR InstName BATT-AUX
SYMATTR Value PULSE(7 20 0 10ms 10ms 0 0 10)
SYMBOL schottky 816 336 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value B540C
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 816 592 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMATTR Value B540C
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL nmos 608 736 R270
SYMATTR InstName M4
SYMATTR Value PH6325L
SYMBOL voltage 800 784 M180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
SYMATTR InstName LOGIC1
SYMATTR Value PULSE(0 5 0 1u 1u 3ms 6ms 100)
SYMBOL res 496 64 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 40k
SYMBOL zener 768 64 R90
WINDOW 0 -4 32 VBottom 2
WINDOW 3 36 32 VTop 2
SYMATTR InstName D5
SYMATTR Value BZX84C6V2L
SYMBOL res 640 368 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL res 640 496 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL res 1152 432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1
SYMBOL nmos 608 144 M90
SYMATTR InstName M3
SYMATTR Value PH6325L
TEXT 1032 120 Left 2 !.tran 1u 20m
TEXT 952 224 Left 2 ;R7, R8: Bleed out floating lines to clarify graphs
TEXT 632 120 VLeft 2 ; 8<  cut here to simulate pulling to ground (ltspice wont do it; Ive f*cking tried)
